#config_version=6
hardware:
  platform: opp
  driverboards: gen2

opp:
  #Use the USB ports defined by your OS for the two STM32 boards
  ports: COM3, COM4, COM5

#hardware:
#  platform: smart_virtual

machine:
  balls_installed: 5
  min_balls: 5

game:
  balls_per_game: 3
  max_players: 4

modes:
  - base
  - twenties
  - sanity_targets
  - eldersign
  - tilt
  - bonus
  - comboloop
  - starting_video
  - sanity_videos
  - multiplayer_videos
  - game_over
  - random_available_mission

  - pre_azathoth
  - pre_king
  - pre_nyarla
  - pre_cthulhu
  - pre_shub

  - aza
  - aza_win
  - king
  - king_win
  - nyarla
  - nyarla_win
  - cthulhu
  - cthulhu_win
  - shub
  - shub_win
  - radio
  - radio_win
  - charleston
  - charleston_win
  - speakeasy
  - speakeasy_win
  - cult
  - cult_win
  - graveyard
  - graveyard_win
  - city
  - city_win
  - stormy_night
  - buddy_twenties
  - random_bonus
  - pursuit_twenties
  - lurking
  - chthonian_attack
  - bywandine
  - fordt_ride

  - cellar  
  - sanity
  - library
  - library_charleston
  - library_radio
  - library_speakeasy
  - library_cult
  - library_graveyard
  - library_city
  - library_nyarla
  - library_king
  - library_shub
  - library_aza
  - library_cthulhu
  - library_video
  - kickback
  - skillshot
  - superskillshot
  - carousel
  - mystery_twenties
  - team_lane
  - extraball_twenties
  - multiball_twenties
  - multiball_rlyeh
  - multiball_portal
  - high_score
  - portal
  - secret_library

  - videomonster
  - videofordt

###########################


player_vars:

  spell_boost_multiplier:
    value_type: int
    initial_value: 1
  mission_boost_multiplier:
    value_type: float
    initial_value: 1

  fordt_speed:
    value_type: int
    initial_value: 2
  videofordt_running:
    initial_value: "on"
    value_type: str
  variable_block_videomode:
    initial_value: "off"
    value_type: str
  variable_choose_videomode:
    initial_value: "off"
    value_type: str

  random_event_available:
    initial_value: "yes"
    value_type: str

  mystery_extraball_awarded:
    initial_value: "false"
    value_type: str

  game_over_number:
    initial_value: "off"
    value_type: str

  lurking_monster_life:
    initial_value: "ok"
    value_type: str
  great_ones_availability:
    initial_value: "ok"
    value_type: str
  variable_aza_life:
    initial_value: "ok"
    value_type: str
  variable_nyarla_life:
    initial_value: "ok"
    value_type: str
  variable_king_life:
    initial_value: "ok"
    value_type: str
  variable_shub_life:
    initial_value: "ok"
    value_type: str
  sanity_gauge:
    value_type: int
    initial_value: 0

  aza_mission_level:
    initial_value: "step_one"
    value_type: str
  king_mission_level:
    initial_value: "step_one"
    value_type: str
  nyarla_mission_level:
    initial_value: "step_one"
    value_type: str
  cthulhu_mission_level:
    initial_value: "step_one"
    value_type: str
  shub_mission_level:
    initial_value: "step_one"
    value_type: str

  aza_flute_gauge:
    value_type: int
    initial_value: 3
  aza_deepspace_gauge:
    value_type: int
    initial_value: 3
  aza_court_gauge:
    value_type: int
    initial_value: 3
  aza_end_gauge:
    value_type: int
    initial_value: 6

  king_curtain_gauge:
    value_type: int
    initial_value: 3
  king_horror_gauge:
    value_type: int
    initial_value: 3
  king_end_gauge:
    value_type: int
    initial_value: 8
  king_clue_variable:
    initial_value: "no"
    value_type: str

  cthulhu_clue_gauge:
    value_type: int
    initial_value: 1
  cthulhu_book_gauge:
    value_type: int
    initial_value: 6
  cthulhu_punch_gauge:
    value_type: int
    initial_value: 20
  cthulhu_wave_gauge:
    value_type: int
    initial_value: 11
  cthulhu_escape_gauge:
    value_type: int
    initial_value: 5

  shub_lost_gauge:
    value_type: int
    initial_value: 3
  shub_gathering_gauge:
    value_type: int
    initial_value: 3
  shub_young_gauge:
    value_type: int
    initial_value: 2
  shub_youngtarget_gauge:
    value_type: int
    initial_value: 1
  shub_end_gauge:
    value_type: int
    initial_value: 20

  nyarla_encounter_gauge:
    value_type: int
    initial_value: 2
  nyarla_encounterclue_gauge:
    value_type: int
    initial_value: 1
  nyarla_witchtarget_gauge:
    value_type: int
    initial_value: 2
  nyarla_witchramp_gauge:
    value_type: int
    initial_value: 2
  nyarla_forms_gauge:
    value_type: int
    initial_value: 3
  nyarla_end_gauge:
    value_type: int
    initial_value: 12

  cult_escape_gauge:
    value_type: int
    initial_value: 6

  number_of_bullet:
    value_type: int
    initial_value: 0
  number_of_object:
    value_type: int
    initial_value: 0
  number_of_clue:
    value_type: int
    initial_value: 0

  speed_videomonster_gauge:
    value_type: int
    initial_value: 0
  videomonster_bite_gauge:
    value_type: int
    initial_value: 0
  videomonster_goodshot_gauge:
    value_type: int
    initial_value: 0
  videomonster_score:
    value_type: int
    initial_value: 0
  monster_life:
    initial_value: "alive"
    value_type: str

  number_of_book:
    value_type: int
    initial_value: 0
  random_value_mission:
    value_type: int
    initial_value: 0
  multiplier:
    value_type: int
    initial_value: 1
  bonus_multiplier:
    value_type: int
    initial_value: 1
  bonus_ramps:
    value_type: int
    initial_value: 0
  bonus_targets:
    value_type: int
    initial_value: 0
  bonus_loop:
    value_type: int
    initial_value: 0
  loop_count:
    value_type: int
    initial_value: 0
  loops_champion:
    value_type: int
    initial_value: 0

  bonus_combo:
    value_type: int
    initial_value: 0
  combo_count:
    value_type: int
    initial_value: 0
  combos_champion:
    value_type: int
    initial_value: 0

  radio_champion:
    value_type: int
    initial_value: 0
  charleston_champion:
    value_type: int
    initial_value: 0
  speakeasy_champion:
    value_type: int
    initial_value: 0
  cult_champion:
    value_type: int
    initial_value: 0
  graveyard_champion:
    value_type: int
    initial_value: 0
  city_champion:
    value_type: int
    initial_value: 0
  aza_champion:
    value_type: int
    initial_value: 0
  king_champion:
    value_type: int
    initial_value: 0
  nyarla_champion:
    value_type: int
    initial_value: 0
  cthulhu_champion:
    value_type: int
    initial_value: 0
  shub_champion:
    value_type: int
    initial_value: 0
  videomonster_champion:
    value_type: int
    initial_value: 0
  videofordt_champion:
    value_type: int
    initial_value: 0

  bywandine_bonus:
    value_type: int
    initial_value: 0

  variable_extraball_value:
    value_type: int
    initial_value: 50
  variable_superpops_value:
    value_type: int
    initial_value: 50
  variable_superpops_active:
    initial_value: "off"
    value_type: str
  variable_extraball_twenties:
    initial_value: "undone"
    value_type: str
  speakeasy_bumper_count:
    value_type: int
    initial_value: 20
  city_DT_count:
    value_type: int
    initial_value: 4
  city_DT_row_count_value:
    value_type: int
    initial_value: 0
  graveyard_dig_count:
    value_type: int
    initial_value: 5
  radio_listen_count:
    value_type: int
    initial_value: 3
  charleston_target_count:
    value_type: int
    initial_value: 21

  azathoth_mission_available:
    initial_value: "unavailable"
    value_type: str
  king_mission_available:
    initial_value: "unavailable"
    value_type: str
  nyarla_mission_available:
    initial_value: "unavailable"
    value_type: str
  cthulhu_mission_available:
    initial_value: "unavailable"
    value_type: str
  shub_mission_available:
    initial_value: "unavailable"
    value_type: str

  insert_azathoth:
    initial_value: "off"
    value_type: str
  insert_king:
    initial_value: "off"
    value_type: str
  insert_nyarla:
    initial_value: "off"
    value_type: str
  insert_cthulhu:
    initial_value: "off"
    value_type: str
  insert_shub:
    initial_value: "off"
    value_type: str

  insert_library:
    initial_value: "off"
    value_type: str
  insert_clue:
    initial_value: "off"
    value_type: str   
  insert_eldersign:
    initial_value: "off"
    value_type: str  

  sanity_level:
    initial_value: "level_0"
    value_type: str

  mission_charleston:
    initial_value: "notcompleted"
    value_type: str

  mission_radio:
    initial_value: "notcompleted"
    value_type: str

  mission_speakeasy:
    initial_value: "notcompleted"
    value_type: str

  mission_graveyard:
    initial_value: "notcompleted"
    value_type: str

  mission_cult:
    initial_value: "notcompleted"
    value_type: str

  mission_city:
    initial_value: "notcompleted"
    value_type: str

  mission_myth:
    initial_value: "noweapon"
    value_type: str

  insert_multiball_twenties:
    initial_value: "zero"
    value_type: str
  count_multiball_charleston:
    initial_value: "zero"
    value_type: str
  multiball_portal_available:
    initial_value: "false"
    value_type: str


  multiball_twenties_running:
    initial_value: "off"
    value_type: str
  multiball_rlyeh_running:
    initial_value: "off"
    value_type: str
  cellar_multiball_running:
    initial_value: "off"
    value_type: str
  portal_multiball_running:
    initial_value: "off"
    value_type: str
  buddy_mode_running:
    initial_value: "off"
    value_type: str
  pursuit_mode_running:
    initial_value: "off"
    value_type: str

  variable_targetshubyoung:
    initial_value: "not_hit"
    value_type: str

  cellar_investigator_state:
    initial_value: "free"
    value_type: str

  rlyeh_multi_available:
    initial_value: "no"
    value_type: str
  rlyeh_multi_level_2_available:
    initial_value: "no"
    value_type: str
  rlyeh_multi_level_3_available:
    initial_value: "no"
    value_type: str

  lock_rlyeh_twenties_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_aza_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_charleston_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_city_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_cthulhu_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_cult_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_graveyard_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_king_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_nyarla_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_radio_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_shub_available:
    initial_value: "yes"
    value_type: str
  lock_rlyeh_speakeasy_available:
    initial_value: "yes"
    value_type: str

  fordt_ride_mode_running:
    initial_value: "off"
    value_type: str

###########################
#1-0-10 #NE FONCTIONNE PAS SUR LA COBRA

switches:
  s_left_flipper:
    number: 0-0-1
    tags: left_flipper

  s_right_flipper:
    number: 0-0-2
    tags: right_flipper

  s_tilt:
    number: 0-0-3
    tags: tilt_warning

  s_action:
    number: 0-0-26
    tags: action

  s_sling_left:
    number: 0-0-27
    ignore_window_ms: 200
    tags: left_slingshot

  s_sling_right:
    number: 0-0-8
    ignore_window_ms: 200
    tags: right_slingshot

  s_sling_up:
    number: 1-0-11
    tags: up_slingshot

  s_popbumper_one:
    number: 0-0-9
    tags: bumper_one

  s_popbumper_two:
    number: 0-0-10
    tags: bumper_two

  s_popbumper_three:
    number: 0-0-11
    tags: bumper_three

  s_plunger:
    number: 1-0-1
    tags: plunger_switch

  s_drain:
    number: 1-0-2
    type: 'NC'
    tags: eject_switch
  
  s_drain_2:
    number: 1-0-53
    tags: drain2

  s_drain_3:
    number: 1-0-61
    tags: drain3

  s_drain_4:
    number: 1-0-69
    tags: drain4

  s_drain_5:
    number: 1-0-77
    tags: drain5

  s_start:
    number: 0-0-16
    tags: start

  s_spinner:
    number: 1-0-37
    tags: spinner, playfield_active

  s_scoop_bas:
    number: 1-0-3
    type: 'NC'
    tags: scoop_1
    ignore_window_ms: 500

  s_scoop_haut:
    number: 1-0-9
    type: 'NC'
    tags: scoop_2
    ignore_window_ms: 500

  s_target_square_white_1:
    number: 1-0-32 
    tags: target_s_w_1, playfield_active

  s_target_square_white_2:
    number: 1-0-40 
    tags: target_s_w_2, playfield_active

  s_target_square_white_3:
    number: 1-0-48 
    tags: target_s_w_3, playfield_active

  s_target_square_white_4:
    number: 1-0-56 
    tags: target_s_w_4, playfield_active

  s_target_square_white_5:
    number: 1-0-64 
    tags: target_s_w_5, playfield_active

  s_target_sanity_1:
    number: 1-0-50 
    tags: target_sanity_1, playfield_active

  s_target_sanity_2:
    number: 1-0-42 
    tags: target_sanity_2, playfield_active

  s_target_sanity_3:
    number: 1-0-34 
    tags: target_sanity_3, playfield_active

  s_target_sanity_4:
    number: 1-0-72 
    tags: target_sanity_4, playfield_active

  s_target_sanity_5:
    number: 1-0-80 
    tags: target_sanity_5, playfield_active

  s_target_sanity_6:
    number: 1-0-88 
    tags: target_sanity_6, playfield_active

  s_target_library_1:
    number: 1-0-84 
    tags: target_library_1, playfield_active

  s_target_library_2:
    number: 1-0-76 
    tags: target_library_2, playfield_active

  s_target_library_3:
    number: 1-0-68 
    tags: target_library_3, playfield_active

  s_target_library_4:
    number: 1-0-52 
    tags: target_library_4, playfield_active

  s_target_library_5:
    number: 1-0-44 
    tags: target_library_5, playfield_active

  s_target_library_6:
    number: 1-0-36 
    tags: target_library_6, playfield_active

  s_target_green_1:
    number: 1-0-59 
    tags: target_green_1, playfield_active

  s_target_green_2:
    number: 1-0-51 
    tags: target_green_2, playfield_active

  s_target_green_3:
    number: 1-0-43 
    tags: target_green_3, playfield_active

  s_drop_target_1:
    number: 1-0-67
    tags: drop_target_1

  s_drop_target_2:
    number: 1-0-75
    tags: drop_target_2

  s_drop_target_3:
    number: 1-0-83
    tags: drop_target_3

  s_drop_target_4:
    number: 1-0-91
    tags: drop_target_4

  s_roll_fordt:
    number: 1-0-35 
    tags: roll_fordt, playfield_active

  s_roll_asylum:
    number: 1-0-33 
    tags: roll_asylum, playfield_active

  s_roll_skill_shot_3:
    number: 1-0-41 
    tags: roll_skill_3, playfield_active

  s_roll_skill_shot_2:
    number: 1-0-49 
    tags: roll_skill_2, playfield_active

  s_roll_skill_shot_1:
    number: 1-0-57 
    tags: roll_skill_1, playfield_active

  s_gate_library:
    number: 1-0-65 
    tags: gate_library, playfield_active

  s_gate_exit_library:
    number: 1-0-45 
    tags: gate_exit_library, playfield_active

  s_gate_secret_library:
    number: 1-0-60 
    tags: gate_secret_library, playfield_active

  s_gate_main_ramp:
    number: 1-0-92 
    tags: gate_main_ramp, playfield_active

  s_gate_green_ramp:
    number: 1-0-89 
    tags: gate_green_ramp, playfield_active

  s_gate_cthulhu_ramp:
    number: 1-0-74 
    tags: gate_cthulhu_ramp, playfield_active

  s_roll_library:
    number: 1-0-73 
    tags: roll_library, playfield_active

  s_roll_space:
    number: 1-0-81 
    tags: roll_space, playfield_active

  s_roll_left_outlane:
    number: 1-0-58 
    tags: roll_left_outlane

  s_roll_right_inlane:
    number: 1-0-90 
    tags: roll_right_intlane, playfield_active

  s_roll_left_inlane:
    number: 1-0-66 
    tags: roll_left_inlane, playfield_active

  s_roll_right_outlane:
    number: 1-0-82 
    tags: roll_right_outlane, playfield_active

  s_kickback:
    number: 1-0-8
    tags: kickback_switch

###########################

timed_switches:
  s_action_long:
    switch_tags: action
    time: 4s

  s_action_book:
    switch_tags: action
    time: 2s

###########################

# combo_switches:
#   s_books:
#     tag_1: left_flipper
#     tag_2: right_flipper
#     events_when_both: use_books


###########################

keyboard:   #use to drive your game from the computer for testing
  s:
    switch: s_start
  a:
    switch: s_action
  d:
    event: debug_dump_stats

###########################

coils:

  c_drain_eject:
    number: 1-0-2
    default_pulse_ms: 25

  c_plunger:
    number: 1-0-1
    default_pulse_ms: 35

  c_kickback:
    number: 1-0-6
    default_pulse_ms: 20

  c_flipper_upleft_main:
    number: 0-0-8
    default_pulse_ms: 12
  c_flipper_upleft_hold:
    number: 0-0-9
    allow_enable: true

  c_flipper_left_main:
    number: 0-0-13
    default_pulse_ms: 45
  c_flipper_left_hold:
    number: 0-0-14
    allow_enable: true

  c_flipper_right_main:
    number: 0-0-0
    default_pulse_ms: 45
  c_flipper_right_hold:
    number: 0-0-12
    allow_enable: true

  c_flipper_petitgauche_main:
    number: 0-0-7
    default_pulse_ms: 18
  c_flipper_petitgauche_hold:
    number: 0-0-6
    allow_enable: true

  c_flipper_petitdroit_main:
    number: 0-0-2
    default_pulse_ms: 18
  c_flipper_petitdroit_hold:
    number: 0-0-1
    allow_enable: true

  c_sling_left:
    number: 0-0-11
    default_pulse_ms: 15

  c_sling_right:
    number: 0-0-15
    default_pulse_ms: 15

  c_sling_up:
    number: 1-0-7
    default_pulse_ms: 15

  c_popbumper_one:
    number: 0-0-5
    default_pulse_ms: 30 #30

  c_popbumper_two:
    number: 0-0-4
    default_pulse_ms: 30 #30

  c_popbumper_three:
    number: 0-0-3
    default_pulse_ms: 30 #30
  
  c_reset_drop_targets:
    number: 1-0-3
    default_pulse_ms: 60
  
  c_scoop_bas:
    number: 1-0-0
    default_pulse_ms: 35

  c_scoop_haut:
    number: 1-0-5
    default_pulse_ms: 18

  c_knocker:
    number: 3-0-1 # 3-0-1
    default_pulse_ms: 15

  c_shaker:
    number: 3-0-2
    default_pulse_ms: 1
    default_hold_power: 0.5

  c_postup:
    number: 3-0-3 # 3-0-3
    default_pulse_ms: 55  #35
    default_hold_power: 0.5

###########################

drop_targets:
   o:
     switch: s_drop_target_1
     reset_coil: c_reset_drop_targets
   p:
     switch: s_drop_target_2
     reset_coil: c_reset_drop_targets
   e:
     switch: s_drop_target_3
     reset_coil: c_reset_drop_targets
   n:
     switch: s_drop_target_4
     reset_coil: c_reset_drop_targets

drop_target_banks:
  open:
    drop_targets: o, p, e, n
    reset_coils: c_reset_drop_targets
    reset_events: timer_DT_reset_time_complete, timer_DT_city_reset_time_complete, ball_started, mode_charleston_started, mode_radio_started, mode_speakeasy_started, mode_graveyard_started, mode_city_started, mode_cult_started, mode_king_started, mode_nyarla_started, mode_aza_started, mode_shub_started, mode_cthulhu_started, mode_twenties_started, mode_bywandine_started, reset_bywandine_dt, nyarla_green_ramp_end_shot_nyarlaflashing_hit, launchnyarlaend, block_multiball_portal, mode_fordt_ride_started

###########################

autofire_coils:
  ac_slingshot_left:
    coil: c_sling_left
    switch: s_sling_left
    enable_events: mode_base_started, mode_carousel_stopped, mode_fordt_ride_stopped
    disable_events: mode_carousel_started, killplayer, mode_high_score_started, mode_videomonster_started, mode_videofordt_started, mode_bonus_started, mode_attrack_started, mode_fordt_ride_started

  ac_slingshot_right:
    coil: c_sling_right
    switch: s_sling_right
    enable_events: mode_base_started, mode_carousel_stopped, mode_fordt_ride_stopped
    disable_events: mode_carousel_started, killplayer, mode_high_score_started, mode_videomonster_started, mode_videofordt_started, mode_bonus_started, mode_attrack_started, mode_fordt_ride_started

  ac_slingshot_up:
    coil: c_sling_up
    switch: s_sling_up

  ac_popbumper_one:
    coil: c_popbumper_one
    switch: s_popbumper_one

  ac_popbumper_two:
    coil: c_popbumper_two
    switch: s_popbumper_two

  ac_popbumper_three:
    coil: c_popbumper_three
    switch: s_popbumper_three

###########################

coil_player:
  knocker_pulse:
    c_knocker:
      action: pulse

###########################

kickbacks:
  ac_left_kickback:
    coil: c_kickback
    switch: s_kickback
    enable_events: mode_kickback_started
    disable_events: mode_kickback_stopped

###########################

flippers:
  Up_left_flipper:
    main_coil: c_flipper_upleft_main
    hold_coil: c_flipper_upleft_hold
    activation_switch: s_left_flipper
    enable_events: mode_base_started, mode_carousel_stopped, stop_earthquake, mode_chthonian_attack_stopped, mode_bywandine_stopped, mode_fordt_ride_stopped
    disable_events: launch_earthquake, mode_carousel_started, killplayer, mode_high_score_started, mode_videomonster_started, mode_videofordt_started, mode_bonus_started, mode_attract_started, mode_bywandine_started, show_fordt_ride_bonus

  left_flipper:
    main_coil: c_flipper_left_main
    hold_coil: c_flipper_left_hold
    activation_switch: s_left_flipper
    enable_events: mode_base_started, mode_carousel_stopped, stop_earthquake, mode_chthonian_attack_stopped, mode_bywandine_stopped, mode_fordt_ride_stopped
    disable_events: launch_earthquake, mode_carousel_started, killplayer, mode_high_score_started, mode_videomonster_started, mode_videofordt_started, mode_bonus_started, mode_attract_started, mode_bywandine_started, mode_fordt_ride_started

  right_flipper:
    main_coil: c_flipper_right_main
    hold_coil: c_flipper_right_hold
    activation_switch: s_right_flipper
    enable_events: mode_base_started, mode_carousel_stopped, stop_earthquake, mode_chthonian_attack_stopped, mode_bywandine_stopped, mode_fordt_ride_stopped
    disable_events: launch_earthquake, mode_carousel_started, killplayer, mode_high_score_started, mode_videomonster_started, mode_videofordt_started, mode_bonus_started, mode_attract_started, mode_bywandine_started, mode_fordt_ride_started

  petitgauche_flipper:
    main_coil: c_flipper_petitgauche_main
    hold_coil: c_flipper_petitgauche_hold
    activation_switch: s_left_flipper
    enable_events: mode_library_started, mode_library_charleston_started, mode_library_radio_started, mode_library_speakeasy_started, mode_library_cult_started, mode_library_graveyard_started, mode_library_city_started, mode_library_nyarla_started, mode_library_king_started, mode_library_shub_started, mode_library_aza_started, mode_library_cthulhu_started
    disable_events: mode_library_stopped, mode_library_charleston_stopped, mode_library_radio_stopped, mode_library_speakeasy_stopped, mode_library_cult_stopped, mode_library_graveyard_stopped, mode_library_city_stopped, mode_library_nyarla_stopped, mode_library_king_stopped, mode_library_shub_stopped, mode_library_aza_stopped, mode_library_cthulhu_stopped, mode_fordt_ride_started

  petitdroitflipper:
    main_coil: c_flipper_petitdroit_main
    hold_coil: c_flipper_petitdroit_hold
    activation_switch: s_right_flipper
    enable_events: mode_library_started, mode_library_charleston_started, mode_library_radio_started, mode_library_speakeasy_started, mode_library_cult_started, mode_library_graveyard_started, mode_library_city_started, mode_library_nyarla_started, mode_library_king_started, mode_library_shub_started, mode_library_aza_started, mode_library_cthulhu_started
    disable_events: mode_library_stopped, mode_library_charleston_stopped, mode_library_radio_stopped, mode_library_speakeasy_stopped, mode_library_cult_stopped, mode_library_graveyard_stopped, mode_library_city_stopped, mode_library_nyarla_stopped, mode_library_king_stopped, mode_library_shub_stopped, mode_library_aza_stopped, mode_library_cthulhu_stopped, mode_fordt_ride_started

###########################

ball_devices:
  bd_drain:
    ball_switches: s_drain, s_drain_2, s_drain_3, s_drain_4, s_drain_5
    eject_coil: c_drain_eject
    eject_targets: bd_plunger_lane
    tags: drain, home, trough
    eject_timeouts: 5s

  bd_plunger_lane:
    ball_switches: s_plunger
    eject_coil: c_plunger
    mechanical_eject: true
    eject_timeouts: 3s
#    player_controlled_eject_event: s_launch_button_active

  bd_scoop_bas:
    ball_switches: s_scoop_bas
    eject_coil: c_scoop_bas
    eject_timeouts: 2s
    
  bd_scoop_haut:
    ball_switches: s_scoop_haut
    eject_coil: c_scoop_haut
    eject_timeouts: 2s
    # eject_events: hold_stop


###########################

playfields:
  playfield:
    default_source_device: bd_plunger_lane
    tags: default

###########################

displays:
  window:
    width: 1440
    height: 900

window:
  width: 1440
  height: 900
  title: CTHULHU PINBALL
  resizable: true
  borderless: true
  fullscreen: true
  exit_on_escape: true
  source_display: window

###########################

slides:
  welcome_slide:
    widgets:
      - type: text
        text: THE BALL OF CTHULHU
        font_size: 100
        color: purple
        style: mission_text

  main_init:
    widgets:
      - type: text
        text: INITIALIZING
        font_size: 100
        color: purple
        y: 60%
      - type: text
        text: LOADING LOVECRAFT STORIES
        font_size: 100
        y: 50%
      - type: text
        text: "(percent)%"
        font_size: 100
        y: 40%

###########################

slide_player:
  init_done: welcome_slide

  loading_assets{loaded>3}: main_init

###########################

machine_vars:
  master_volume:
    initial_value: 1

  # start_sequence_variable:
  #   persist: false
  #   value_type: str
  #   initial_value: on

###########################

sound_system:
  buffer: 1024
  channels: 1
  enabled: true
  frequency: 44100
  tracks:
    music:
      type: standard
      simultaneous_sounds: 1
      volume: 1
      events_when_stopped: music_track_stopped
      events_when_played: music_track_played
      events_when_paused: music_track_paused
    voice:
      type: standard
      simultaneous_sounds: 1
      volume: 2
    sfx:
      type: standard
      simultaneous_sounds: 8
      volume: 1

###########################

assets:
  sounds:
    default:
      load: on_demand
    music:
      track: music
    sfx:
      track: sfx
    voice:
      track: voice

###########################

config:
  - sounds_config.yaml
  - lights_config.yaml

###########################

light_settings:
  default_fade_ms: 40

###########################

widget_styles:
  text_default:
    font_size: 80
    color: white
    font_name: Bagerich
  text_default_flash:
    font_size: 80
    color: white
    font_name: Bagerich
    animations:
          show_slide_texte_flash:                   
            - property: opacity         
              value: 1                  
              duration: .5s             
            - property: opacity         
              value: 0
              duration: .5s
              repeat: true  

  mission_text:
    font_size: 100
    color: white
    font_name: Trattatello
  mission_text_small:
    font_size: 70
    font_name: Trattatello

###########################

animations:
  fade_in:
    - property: opacity
      value: 0
      duration: 0s
    - property: opacity
      value: 1
      duration: 1s

  fade_in_quick:
    - property: opacity
      value: 0
      duration: 0s
    - property: opacity
      value: 1
      duration: 1s


  fade_in_object:
    - property: opacity
      value: 0
      duration: 0s
    - property: opacity
      value: 0
      duration: 1s
    - property: opacity
      value: 1
      duration: 1s

  fade_out:
    property: opacity
    value: 0
    duration: 1s

  fade_out_object:
    - property: opacity
      value: 1
      duration: 0.6s
    - property: opacity
      value: 0
      duration: 0.4s


  anim_shake:
    - property: x
      value: 20
      relative: true
      duration: 0.1s
    - property: x
      value: 0
      relative: true
      duration: 0.2s
    - property: x
      value: -20
      relative: true
      duration: 0.1s
    - property: x
      value: 0
      relative: true
  anim_mini_shake:
    - property: y
      value: 10
      relative: true
      duration: 0.1s
    - property: y
      value: 0
      relative: true
      duration: 0.2s
    - property: y
      value: -10
      relative: true
      duration: 0.1s
    - property: y
      value: 0
      relative: true

  bonus_anim_shake:
    - property: rotation
      value: 10
      relative: true
      duration: 100ms
    - property: rotation
      value: -20
      relative: true
      duration: 100ms
    - property: rotation
      value: 20
      relative: true
      duration: 100ms
    - property: rotation
      value: -20
      relative: true
      duration: 100ms
    - property: rotation
      value: 20
      relative: true
      duration: 100ms
    - property: rotation
      value: -20
      relative: true
      duration: 100ms
    - property: rotation
      value: 20
      relative: true
      duration: 100ms
    - property: rotation
      value: -20
      relative: true
      duration: 100ms
    - property: rotation
      value: 20
      relative: true
      duration: 150ms
    - property: rotation
      value: -20
      relative: true
      duration: 150ms
    - property: rotation
      value: 20
      relative: true
      duration: 250ms
    - property: rotation
      value: -20
      relative: true
      duration: 250ms
    - property: rotation
      value: 20
      relative: true
      duration: 250ms
    - property: rotation
      value: -20
      relative: true
      duration: 250ms
    - property: rotation
      value: 20
      relative: true
      duration: 350ms
    - property: rotation
      value: -20
      relative: true
      duration: 350ms

####### pour fordT vidéomode

  anim_brouillard:
    - property: x
      value: -3500
      relative: true
      duration: 120s

  anim_bat:
    - property: x
      value: 3500
      relative: true
      duration: 120s
    - property: y
      value: -200
      relative: true
      duration: 20s
      easing: in_out_quint
      timing: with_previous
    - property: y
      value: 200
      relative: true
      duration: 20s
      easing: in_out_quint
    - property: y
      value: -200
      relative: true
      duration: 20s
      easing: in_out_quint
    - property: y
      value: 200
      relative: true
      duration: 20s
      easing: in_out_quint
    - property: y
      value: -200
      relative: true
      duration: 20s
      easing: in_out_quint
    - property: y
      value: 200
      relative: true
      duration: 20s
      easing: in_out_quint


  anim_fordt:
    - property: y
      value: 5
      relative: true
      duration: 0.2s
    - property: y
      value: -5
      relative: true
      duration: 0.2s
    - property: x
      value: -2
      relative: true
      duration: 0.2s
      timing: with_previous
    - property: x
      value: 2
      relative: true
      duration: 0.2s
    - property: y
      value: 5
      relative: true
      duration: 0.2s
      timing: with_previous
    - property: y
      value: -5
      relative: true
      duration: 0.2s
      repeat: true

  anim_arbre_gauche:
    - property: opacity
      value: 1
      duration: 2s
    - property: x
      value: -73%
      duration: 2s
      relative: true
      easing: in_quint
      timing: with_previous
    - property: y
      value: -50%
      duration: 2s
      relative: true
      easing: in_quint
      timing: with_previous
    - property: scale
      value: 1
      duration: 2s
      relative: true
      easing: in_quint
      timing: with_previous

  anim_arbre_droite:
    - property: opacity
      value: 1
      duration: 2s
    - property: x
      value: 73%
      duration: 2s
      relative: true
      easing: in_quint
      timing: with_previous
    - property: y
      value: -50%
      duration: 2s
      relative: true
      easing: in_quint
      timing: with_previous
    - property: scale
      value: 1
      duration: 2s
      easing: in_quint
      timing: with_previous


  anim_rocher_gauche:
    - property: x
      value: 12%
      duration: 2.5s
    - property: y
      value: -30
      duration: 2.5s
      timing: with_previous
    - property: scale
      value: 0.8
      duration: 2.5s
      timing: with_previous

  anim_rocher_centre:
    - property: y
      value: -30
      duration: 2.5s
    - property: scale
      value: 0.8
      duration: 2.5s
      timing: with_previous

  anim_rocher_droite:
    - property: x
      value: 95%
      duration: 2.5s
    - property: y
      value: -30
      duration: 2.5s
      timing: with_previous
    - property: scale
      value: 0.8
      duration: 2.5s
      timing: with_previous